/* jqKeyboard | v1.0.0 | https://github.com/hAWKdv/jqKeyboard#readme | MIT | b122 */
var jqKeyboard=function(t){"use strict";var e='input[type="text"], textarea, input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="password"], input[type="search"], input[type="month"], input[type="url"], input[type="time"], input[type="tel"], input[type="week"], input[type="number"]',a="normal",n="shift-b",i="special",s="jqk-btn",o="jqk-lang-btn",c="selected",l="clicked",r="minimize-btn",d="jqk-toggle-btn",u="btn-row",h="jqk-hide",g="dark",p="jq-keyboard",f="jqk-lang-cont",v="-lang",m=0,C=3,L={},b={},$={},S={},k={};return $={insertCharacter:function(t,e,a){return t.slice(0,e.start)+a+t.slice(e.end)},backspaceStrManipulation:function(t,e,a){return 0===e.start&&0===e.end?t:t.slice(0,e.start-a)+t.slice(e.end)},getSelectedLangClass:function(){return"."+k.selectedLanguage+v},setCaretPosition:function(t,e){var a;null!==t&&(t.createTextRange?(a=t.createTextRange(),a.move("character",e),a.select()):t.selectionStart?(t.focus(),t.setSelectionRange(e,e)):t.focus())}},L={$$createBase:function(){var e,a,n=t("body");this.$base=t("<div>").attr("id",p),this.$langCont=t("<div>").attr("id",f),this.$minBtn=t("<div>").addClass(r).prop("title","Minimize"),this.$toggleBtn=t("<div>").attr("id",d),k.options&&"dark"===k.options.icon&&this.$toggleBtn.addClass(g),this.$langCont.append(this.$minBtn),this.$base.append(this.$langCont),n.append(this.$toggleBtn),this.createLayout(),k.options&&k.options.containment?(this.containment=t(k.options.containment),this.containment.append(this.$base)):(n.append(this.$base),e=t(window).outerWidth()-this.$base.outerWidth(),a=t(window).outerHeight()-this.$base.outerHeight(),this.containment=[m,m,e,a],this.maintainContainment())},maintainContainment:function(){var e;t(window).resize(function(){clearTimeout(e),e=setTimeout(function(){var e=t(window).outerWidth()-L.$base.outerWidth(),a=t(window).outerHeight()-L.$base.outerHeight(),n=[m,m,e,a];L.$base.draggable("option","containment",n)},100)})},createLayout:function(){var t,e,a,n=jqKeyboard.layouts.length;for(a=0;n>a&&C>a;a+=1)e=jqKeyboard.layouts[a],t=this.createButtons(e,a),this.createLangSwitchBtn(e.lang,a),this.$base.append(t)},createButtons:function(e,a){var n,i,s,o,c,l=t("<div>").addClass(e.lang+v);for(a>0&&l.addClass(h),o=0;o<e.layout.length;o+=1){for(n=t("<div>").addClass(u),s=e.layout[o].split(" "),c=0;c<s.length;c+=1)i=this.buildButtonFromString(s[c]),n.append(i);l.append(n)}return l},buildButtonFromString:function(e){var i=t("<button>").addClass(s);return 1===e.length?i.addClass(a).data("val",e).html(e):3===e.length?i.addClass(n).data("val",e[0]).data("shift",e[2]).data("normal",e[0]).html(e[0]):-1!==e.indexOf("<<")&&-1!==e.indexOf(">>")&&(i=this.createSpecialBtn(i,e)),i},createSpecialBtn:function(t,e){var a=e.replace("<<","").replace(">>","");switch(a){case"space":t.data("val"," ");break;case"tab":t.data("val","	");break;case"enter":t.data("val","\n")}return t.addClass(i+" "+a).html("&nbsp;"),t},createLangSwitchBtn:function(e,a){var n=t("<button>").addClass(o).data("lang",e).html(e.toUpperCase());0===a&&(n.addClass(c),k.selectedLanguage=e),this.$langCont.append(n)}},b={SHIFT_CLASS:"."+i+".shift",CPSLCK_CLASS:"."+i+".capslock",areLangEventsLoaded:{},loadLanguageSwitcher:function(){t("."+o).click(function(){var e=t(this),a=e.data("lang"),n="."+a+v,i=$.getSelectedLangClass();b._resetCaretOfActiveElem(),i!==n&&(t(i).addClass(h),t(n).removeClass(h),t("."+o+"."+c).removeClass(c),e.addClass(c),k.selectedLanguage=a,b.areLangEventsLoaded[k.selectedLanguage]||(b.loadCapsLockEvent(),b.loadShiftEvent(),b.areLangEventsLoaded[k.selectedLanguage]=!0))})},loadCapsLockEvent:function(){var e=$.getSelectedLangClass();this._onLocalButtonClick(b.CPSLCK_CLASS,function(){var a,n;b._resetCaretOfActiveElem(),k.shift[k.selectedLanguage]||(a=t(this),n=a.closest(e),k.capsLock[k.selectedLanguage]?(a.removeClass(c),k.capsLock[k.selectedLanguage]=!1):(a.addClass(c),k.capsLock[k.selectedLanguage]=!0),b._traverseLetterButtons(n,k.capsLock[k.selectedLanguage]))})},loadShiftEvent:function(){var e=$.getSelectedLangClass();this._onLocalButtonClick(b.SHIFT_CLASS,function(){var a,n=t(e),i=n.find(b.SHIFT_CLASS),s=n.find(b.CPSLCK_CLASS);return b._resetCaretOfActiveElem(),k.shift[k.selectedLanguage]?void b._unshift():(k.capsLock[k.selectedLanguage]&&(s.removeClass(c),k.capsLock[k.selectedLanguage]=!1),a=t(this).closest(e),b._traverseInputButtons(a,!0,"shift"),k.shift[k.selectedLanguage]=!0,void i.addClass(c))})},loadBackspaceEvent:function(){t("."+i+".backspace").click(function(){b._onActiveElemTextManipulation(function(t,e){var a;return a=t.start===t.end?1:0,{updatedContent:$.backspaceStrManipulation(e,t,a),caretOffset:-a}})})},loadInputButtonEvent:function(){L.$base.find("."+a).add("."+n).add("."+i+".space").add("."+i+".tab").add("."+i+".enter").click(function(){var e=t(this).data("val");b._onActiveElemTextManipulation(function(t,a){return{updatedContent:$.insertCharacter(a,t,e),caretOffset:1}}),k.shift[k.selectedLanguage]&&b._unshift()})},activeElementListener:function(){var a;a=k.options&&k.options.allowed?k.options.allowed.join(", "):e,t(a).focus(function(){b.$activeElement=t(this)})},_onActiveElemTextManipulation:function(t){var e,a,n,i;b.$activeElement&&(a=b.$activeElement.val()||"",e=b.$activeElement[0],i={start:e.selectionStart,end:e.selectionEnd},n=t(i,a),b.$activeElement.val(n.updatedContent),$.setCaretPosition(e,i.start+n.caretOffset))},_resetCaretOfActiveElem:function(){this.$activeElement&&$.setCaretPosition(this.$activeElement[0],this.$activeElement[0].selectionStart)},_unshift:function(){var e=$.getSelectedLangClass(),a=t($.getSelectedLangClass()).find(b.SHIFT_CLASS),n=a.closest(e);this._traverseInputButtons(n,!1,"normal"),k.shift[k.selectedLanguage]=!1,a.removeClass(c)},_onLocalButtonClick:function(t,e){L.$base.find($.getSelectedLangClass()).find(t).click(e)},_traverseLetterButtons:function(e,n){e.find("."+a).each(function(){var e=t(this),a=e.data("val");a=n?a.toUpperCase():a.toLowerCase(),e.html(a).data("val",a)})},_traverseInputButtons:function(e,a,i){this._traverseLetterButtons(e,a),e.find("."+n).each(function(){var e=t(this),a=e.data(i);e.html(a).data("val",a)})},$$loadEvents:function(){this.activeElementListener(),this.loadLanguageSwitcher(),this.loadInputButtonEvent(),this.loadBackspaceEvent(),this.loadCapsLockEvent(),this.loadShiftEvent(),this.areLangEventsLoaded[k.selectedLanguage]=!0}},S={attachDragToBase:function(){L.$base.draggable({containment:L.containment,cursor:"move",stop:function(){t(this).css({width:"auto",height:"auto"})}})},attachOnClickBtnEvent:function(){t("."+s).mousedown(function(){var e=t(this);e.addClass(l),setTimeout(function(){e.removeClass(l)},500)}).mouseup(function(){t(this).removeClass(l)})},minimizeKeyboard:function(){L.$minBtn.click(function(){L.$base.slideUp(),L.$toggleBtn.fadeIn()})},maximizeKeyboard:function(){L.$toggleBtn.click(function(){L.$base.slideDown(),t(this).hide()})},$$load:function(){this.attachDragToBase(),this.attachOnClickBtnEvent(),this.minimizeKeyboard(),this.maximizeKeyboard()}},k={isReadyToRun:function(){return jqKeyboard.layouts?this.isRunning?(console.error("jqKeyboard: The library is already used/running in the current context/page."),!1):!0:(console.error("jqKeyboard: The keyboard layout configuration file hasn't been loaded."),!1)},init:function(t){k.isReadyToRun()&&(k.options=t,k.isRunning=!0,k.selectedLanguage=null,k.shift={},k.capsLock={},L.$$createBase(),b.$$loadEvents(),S.$$load())}},{init:k.init}}(jQuery);